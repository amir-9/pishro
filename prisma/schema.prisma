generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(auto()) @map("_id") @db.ObjectId
  phone         String    @unique
  passwordHash  String
  phoneVerified Boolean   @default(false)

  // Personal Info
  firstName     String?
  lastName      String?
  email         String?
  nationalCode  String?
  birthDate     DateTime?
  avatarUrl     String?

  // Pay Info
  cardNumber    String?     // Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª
  shebaNumber   String?     // Ø´Ù…Ø§Ø±Ù‡ Ø´Ø¨Ø§
  accountOwner  String?     // Ù†Ø§Ù… ØµØ§Ø­Ø¨ Ø­Ø³Ø§Ø¨

  createdAt     DateTime      @default(now())
  comments      Comment[]     @relation("UserComments")
  orders        Order[]       @relation("UserOrders")
  enrollments   Enrollment[]  @relation("UserEnrollments")
  transactions  Transaction[] @relation("UserTransactions")
  newsComments  NewsComment[] @relation("UserNewsComments")
}

model TempUser {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  phone        String   @unique
  passwordHash String
  createdAt    DateTime @default(now())
}

model Otp {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  phone     String   @unique
  code      String
  expiresAt DateTime
  createdAt DateTime @default(now())
}

model Course {
  id              String       @id @default(auto()) @map("_id") @db.ObjectId
  subject         String
  price           Int
  img             String?
  rating          Float?
  description     String?
  discountPercent Int?
  time            String?
  students        Int?
  videosCount     Int?
  createdAt       DateTime     @default(now())

  // ğŸ†• Ø§ÙØ²ÙˆØ¯Ù† Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
  category        Category?    @relation("CategoryCourses", fields: [categoryId], references: [id], onDelete: SetNull)
  categoryId      String?      @db.ObjectId

  // ğŸ†• Ø§ÙØ²ÙˆØ¯Ù† Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØªÚ¯â€ŒÙ‡Ø§
  relatedTags     Tag[]        @relation("CourseTags", fields: [tagIds], references: [id])
  tagIds          String[]     @db.ObjectId

  // ğŸ†• ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
  slug            String?      @unique // Ø¨Ø±Ø§ÛŒ URL Ø¯ÙˆØ±Ù‡
  level           String?      // "beginner", "intermediate", "advanced"
  language        String       @default("ÙØ§Ø±Ø³ÛŒ") // Ø²Ø¨Ø§Ù† Ø¯ÙˆØ±Ù‡
  prerequisites   String[]     @default([]) // Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§
  learningGoals   String[]     @default([]) // Ø§Ù‡Ø¯Ø§Ù ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ
  instructor      String?      // Ù†Ø§Ù… Ù…Ø¯Ø±Ø³
  status          String       @default("active") // "active", "coming_soon", "archived"
  published       Boolean      @default(true)
  featured        Boolean      @default(false) // Ø¯ÙˆØ±Ù‡ ÙˆÛŒÚ˜Ù‡
  views           Int          @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø²Ø¯ÛŒØ¯

  // Ø±ÙˆØ§Ø¨Ø· Ù…ÙˆØ¬ÙˆØ¯
  comments        Comment[]     @relation("CourseComments")
  enrollments     Enrollment[]  @relation("CourseEnrollments")
  orderItems      OrderItem[]   @relation("CourseOrderItems")
  testimonials    Testimonial[] @relation("CourseTestimonials")

  @@index([categoryId])
  @@index([published, featured])
}

model Comment {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  user      User     @relation(fields: [userId], references: [id], name: "UserComments")
  userId    String   @db.ObjectId
  course    Course   @relation(fields: [courseId], references: [id], name: "CourseComments")
  courseId  String   @db.ObjectId
  text      String
  rating    Int?
  likes     String[]
  dislikes  String[]
  createdAt DateTime @default(now())
  updatedAt DateTime?
}

model Order {
  id           String        @id @default(auto()) @map("_id") @db.ObjectId
  user         User?         @relation(fields: [userId], references: [id], name: "UserOrders")
  userId       String?       @db.ObjectId
  items        Json          // Ù†Ú¯Ù‡ Ù…ÛŒâ€ŒØ¯Ø§Ø±ÛŒÙ… Ø¨Ø±Ø§ÛŒ backward compatibility
  total        Int
  status       String        @default("pending")
  paymentRef   String?
  createdAt    DateTime      @default(now())
  orderItems   OrderItem[]   @relation("OrderOrderItems")
  transactions Transaction[] @relation("OrderTransactions")
}

model NewsletterSubscriber {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  phone     String   @unique
  createdAt DateTime @default(now())
}

// âœ… Ù…Ø¯Ù„ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø± Ø¯ÙˆØ±Ù‡
model Enrollment {
  id           String    @id @default(auto()) @map("_id") @db.ObjectId
  user         User      @relation(fields: [userId], references: [id], name: "UserEnrollments")
  userId       String    @db.ObjectId
  course       Course    @relation(fields: [courseId], references: [id], name: "CourseEnrollments")
  courseId     String    @db.ObjectId
  enrolledAt   DateTime  @default(now())
  progress     Int       @default(0) // Ø¯Ø±ØµØ¯ Ù¾ÛŒØ´Ø±ÙØª 0-100
  completedAt  DateTime? // Ø²Ù…Ø§Ù† ØªÚ©Ù…ÛŒÙ„ Ø¯ÙˆØ±Ù‡
  lastAccessAt DateTime? // Ø¢Ø®Ø±ÛŒÙ† Ø²Ù…Ø§Ù† Ø¯Ø³ØªØ±Ø³ÛŒ

  @@unique([userId, courseId]) // Ù‡Ø± ÛŒÙˆØ²Ø± ÙÙ‚Ø· ÛŒÚ©Ø¨Ø§Ø± Ù…ÛŒØªÙˆÙ†Ù‡ Ø¯Ø± ÛŒÚ© Ø¯ÙˆØ±Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†Ù‡
}

// âœ… Ù…Ø¯Ù„ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§
model Transaction {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  user        User     @relation(fields: [userId], references: [id], name: "UserTransactions")
  userId      String   @db.ObjectId
  order       Order?   @relation(fields: [orderId], references: [id], name: "OrderTransactions")
  orderId     String?  @db.ObjectId
  amount      Int      // Ù…Ø¨Ù„Øº
  type        String   // "payment", "refund", "withdrawal"
  status      String   // "pending", "success", "failed"
  gateway     String?  // "zarinpal", "mellat", etc
  refNumber   String?  // Ø´Ù…Ø§Ø±Ù‡ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ
  description String?
  createdAt   DateTime @default(now())
}

// âœ… Ù…Ø¯Ù„ Ø¬Ø²Ø¦ÛŒØ§Øª Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´
model OrderItem {
  id              String  @id @default(auto()) @map("_id") @db.ObjectId
  order           Order   @relation(fields: [orderId], references: [id], name: "OrderOrderItems")
  orderId         String  @db.ObjectId
  course          Course  @relation(fields: [courseId], references: [id], name: "CourseOrderItems")
  courseId        String  @db.ObjectId
  price           Int     // Ù‚ÛŒÙ…Øª Ø¯Ø± Ø²Ù…Ø§Ù† Ø®Ø±ÛŒØ¯
  discountPercent Int?    // ØªØ®ÙÛŒÙ Ø¯Ø± Ø²Ù…Ø§Ù† Ø®Ø±ÛŒØ¯
}

// âœ… Ù…Ø¯Ù„ Ù…Ù‚Ø§Ù„Ø§Øª Ø®Ø¨Ø±ÛŒ
model NewsArticle {
  id          String        @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  slug        String        @unique
  excerpt     String        // Ø®Ù„Ø§ØµÙ‡ Ù…Ù‚Ø§Ù„Ù‡
  content     String        // Ù…Ø­ØªÙˆØ§ÛŒ Ú©Ø§Ù…Ù„ Ù…Ù‚Ø§Ù„Ù‡
  coverImage  String?       // ØªØµÙˆÛŒØ± Ú©Ø§ÙˆØ±
  author      String?       // Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡
  category    String        // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø®Ø¨Ø± (Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ backward compatibility)
  tags        String[]      // ØªÚ¯â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ (deprecated - Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² relatedTags ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
  published   Boolean       @default(false)
  publishedAt DateTime?     // ØªØ§Ø±ÛŒØ® Ø§Ù†ØªØ´Ø§Ø±
  views       Int           @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø²Ø¯ÛŒØ¯

  // ğŸ†• Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ (Ø¬Ø¯ÛŒØ¯)
  relatedCategory Category?  @relation("CategoryNews", fields: [categoryId], references: [id], onDelete: SetNull)
  categoryId      String?    @db.ObjectId

  // ğŸ†• Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØªÚ¯â€ŒÙ‡Ø§ (Ø¬Ø¯ÛŒØ¯)
  relatedTags     Tag[]      @relation("NewsTags", fields: [tagIds], references: [id])
  tagIds          String[]   @db.ObjectId

  // ğŸ†• ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
  featured        Boolean    @default(false) // Ø®Ø¨Ø± ÙˆÛŒÚ˜Ù‡
  readingTime     Int?       // Ø²Ù…Ø§Ù† Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚Ù‡
  likes           Int        @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ù„Ø§ÛŒÚ©

  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  comments    NewsComment[] @relation("NewsArticleComments")

  @@index([categoryId])
  @@index([published, featured])
  @@index([publishedAt])
}

// âœ… Ù…Ø¯Ù„ Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®Ø¨Ø§Ø±
model NewsComment {
  id        String      @id @default(auto()) @map("_id") @db.ObjectId
  article   NewsArticle @relation(fields: [articleId], references: [id], name: "NewsArticleComments", onDelete: Cascade)
  articleId String      @db.ObjectId
  user      User?       @relation(fields: [userId], references: [id], name: "UserNewsComments", onDelete: SetNull)
  userId    String?     @db.ObjectId
  content   String
  likes     String[]    @default([])
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
}

// âœ… Ù…Ø¯Ù„ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø¯ÛŒØ¬ÛŒØªØ§Ù„
model DigitalBook {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  slug        String   @unique
  author      String
  description String
  cover       String?  // ØªØµÙˆÛŒØ± Ø¬Ù„Ø¯ Ú©ØªØ§Ø¨
  publisher   String?  // Ù†Ø§Ø´Ø±
  year        Int      // Ø³Ø§Ù„ Ø§Ù†ØªØ´Ø§Ø±
  pages       Int?     // ØªØ¹Ø¯Ø§Ø¯ ØµÙØ­Ø§Øª
  isbn        String?  // Ø´Ù…Ø§Ø±Ù‡ ISBN
  language    String   @default("ÙØ§Ø±Ø³ÛŒ")
  rating      Float    @default(0) // Ø§Ù…ØªÛŒØ§Ø² Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†
  votes       Int      @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ø±Ø§ÛŒâ€ŒÙ‡Ø§
  views       Int      @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø²Ø¯ÛŒØ¯
  downloads   Int      @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ù„ÙˆØ¯
  category    String   // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ú©ØªØ§Ø¨ (Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ backward compatibility)
  formats     String[] // ÙØ±Ù…Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯: ["Ø¬Ù„Ø¯ Ø³Ø®Øª", "Ø¬Ù„Ø¯ Ù†Ø±Ù…", "Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©ÛŒ", "ØµÙˆØªÛŒ"]
  status      String[] @default([]) // ÙˆØ¶Ø¹ÛŒØª: ["Ø¬Ø¯ÛŒØ¯", "Ù¾Ø±ÙØ±ÙˆØ´", "ÙˆÛŒÚ˜Ù‡", "Ù…Ø­Ø¨ÙˆØ¨"]
  tags        String[] @default([]) // ØªÚ¯â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ (deprecated - Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² relatedTags ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
  readingTime String?  // Ø²Ù…Ø§Ù† ØªÙ‚Ø±ÛŒØ¨ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡
  isFeatured  Boolean  @default(false) // Ú©ØªØ§Ø¨ ÙˆÛŒÚ˜Ù‡
  price       Int?     // Ù‚ÛŒÙ…Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ - Ø¨Ø±Ø§ÛŒ Ù†Ø³Ø®Ù‡ ÙÛŒØ²ÛŒÚ©ÛŒ)
  fileUrl     String?  // Ù„ÛŒÙ†Ú© Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ (Ø¨Ø±Ø§ÛŒ Ù†Ø³Ø®Ù‡ Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©ÛŒ)
  audioUrl    String?  // Ù„ÛŒÙ†Ú© ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ

  // ğŸ†• Ø±ÙˆØ§Ø¨Ø· Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø³ÛŒØ³ØªÙ… Tag
  relatedTags Tag[]    @relation("BookTags", fields: [tagIds], references: [id])
  tagIds      String[] @db.ObjectId

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// ========================================
// ğŸ†• Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ CMS Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØªÙˆØ§
// ========================================

// 1ï¸âƒ£ Ù…Ø¯Ù„ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
model Category {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  slug        String   @unique // "airdrop", "nft", "crypto", "stock-market", "metaverse"
  title       String   // "Ø§ÛŒØ±Ø¯Ø±Ø§Ù¾", "NFT", "Ú©Ø±ÛŒÙ¾ØªÙˆ", "Ø¨ÙˆØ±Ø³", "Ù…ØªØ§ÙˆØ±Ø³"
  description String?
  icon        String?  // Ù…Ø³ÛŒØ± Ø¢ÛŒÚ©ÙˆÙ† ÛŒØ§ Ù†Ø§Ù… Ø¢ÛŒÚ©ÙˆÙ†
  coverImage  String?  // ØªØµÙˆÛŒØ± Ú©Ø§ÙˆØ± ØµÙØ­Ù‡
  color       String?  // Ú©Ø¯ Ø±Ù†Ú¯ ØªÙ… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ (Ù…Ø«Ù„ "#214554")

  // SEO
  metaTitle       String?
  metaDescription String?
  metaKeywords    String[] @default([])

  // ÙˆØ¶Ø¹ÛŒØª
  published   Boolean  @default(true)
  featured    Boolean  @default(false) // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
  order       Int      @default(0) // ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´

  // Ø±ÙˆØ§Ø¨Ø·
  tags        Tag[]         @relation("CategoryTags", fields: [tagIds], references: [id])
  tagIds      String[]      @db.ObjectId

  courses     Course[]      @relation("CategoryCourses")
  content     PageContent[] @relation("CategoryContent")
  news        NewsArticle[] @relation("CategoryNews")
  faqs        FAQ[]         @relation("CategoryFAQs")
  testimonials Testimonial[] @relation("CategoryTestimonials")

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([published, featured])
}

// 2ï¸âƒ£ Ù…Ø¯Ù„ ØªÚ¯â€ŒÙ‡Ø§ (Ù…Ø³ØªÙ‚Ù„ Ùˆ Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø¬Ø¯Ø¯)
model Tag {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  slug        String   @unique // "technical-analysis", "fundamental-analysis"
  title       String   // "ØªØ­Ù„ÛŒÙ„ ØªÚ©Ù†ÛŒÚ©Ø§Ù„", "ØªØ­Ù„ÛŒÙ„ Ø¨Ù†ÛŒØ§Ø¯ÛŒ"
  description String?
  color       String?  // Ø±Ù†Ú¯ ØªÚ¯
  icon        String?  // Ø¢ÛŒÚ©ÙˆÙ† ØªÚ¯

  // Ø±ÙˆØ§Ø¨Ø· many-to-many
  categories  Category[]     @relation("CategoryTags", fields: [categoryIds], references: [id])
  categoryIds String[]       @db.ObjectId

  courses     Course[]       @relation("CourseTags", fields: [courseIds], references: [id])
  courseIds   String[]       @db.ObjectId

  news        NewsArticle[]  @relation("NewsTags", fields: [newsIds], references: [id])
  newsIds     String[]       @db.ObjectId

  books       DigitalBook[]  @relation("BookTags", fields: [bookIds], references: [id])
  bookIds     String[]       @db.ObjectId

  // Ø¢Ù…Ø§Ø±
  usageCount  Int      @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ù…Ø­ØªÙˆØ§
  clicks      Int      @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ ØªÚ¯

  // SEO
  seoTitle       String?
  seoDescription String?

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([usageCount])
}

// 3ï¸âƒ£ Ù…Ø¯Ù„ Ù…Ø­ØªÙˆØ§ÛŒ ØµÙØ­Ø§Øª (Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ù‡Ø± ØµÙØ­Ù‡)
model PageContent {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
  category    Category @relation("CategoryContent", fields: [categoryId], references: [id], onDelete: Cascade)
  categoryId  String   @db.ObjectId

  // Ù†ÙˆØ¹ Ù…Ø­ØªÙˆØ§
  type        String   // "landing", "about", "features", "faq", "testimonial", "hero", "stats"
  section     String?  // Ù†Ø§Ù… Ø¨Ø®Ø´ (Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨ÛŒØ´ØªØ±)
  title       String?
  subtitle    String?

  // Ù…Ø­ØªÙˆØ§ (flexible JSON structure)
  content     Json     // Ø³Ø§Ø®ØªØ§Ø± Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ Ù‡Ø± type

  // Ù…ØªØ§Ø¯ÛŒØªØ§
  language    String   @default("fa") // "fa", "en"

  // ØªØ±ØªÛŒØ¨ Ùˆ ÙˆØ¶Ø¹ÛŒØª
  order       Int      @default(0)
  published   Boolean  @default(true)

  // Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ù†ØªØ´Ø§Ø±
  publishAt   DateTime? // Ø²Ù…Ø§Ù† Ø§Ù†ØªØ´Ø§Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø´Ø¯Ù‡
  expireAt    DateTime? // Ø²Ù…Ø§Ù† Ø§Ù†Ù‚Ø¶Ø§ (Ø¨Ø±Ø§ÛŒ Ù…Ø­ØªÙˆØ§ÛŒ Ù…ÙˆÙ‚Øª)

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([categoryId, type])
  @@index([published, publishAt])
}

// 4ï¸âƒ£ Ù…Ø¯Ù„ FAQ (Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„)
model FAQ {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  question    String
  answer      String

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ - null = Ø¹Ù…ÙˆÙ…ÛŒ)
  category    Category? @relation("CategoryFAQs", fields: [categoryId], references: [id], onDelete: Cascade)
  categoryId  String?   @db.ObjectId

  // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ FAQ
  faqCategory String?   // "general", "payment", "courses", "technical"

  // ØªØ±ØªÛŒØ¨ Ùˆ ÙˆØ¶Ø¹ÛŒØª
  order       Int      @default(0)
  published   Boolean  @default(true)
  featured    Boolean  @default(false) // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ

  // Ø¢Ù…Ø§Ø±
  views       Int      @default(0)
  helpful     Int      @default(0) // ØªØ¹Ø¯Ø§Ø¯ "Ù…ÙÛŒØ¯ Ø¨ÙˆØ¯"
  notHelpful  Int      @default(0) // ØªØ¹Ø¯Ø§Ø¯ "Ù…ÙÛŒØ¯ Ù†Ø¨ÙˆØ¯"

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([categoryId, published])
  @@index([faqCategory])
}

// 5ï¸âƒ£ Ù…Ø¯Ù„ Testimonial (Ù†Ø¸Ø±Ø§Øª Ùˆ Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†)
model Testimonial {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
  userName    String
  userAvatar  String?
  userRole    String?  // "Ø¯Ø§Ù†Ø´Ø¬Ùˆ", "Ù…Ø¹Ø§Ù…Ù„Ù‡â€ŒÚ¯Ø± Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ", "Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±"
  userCompany String?  // Ø´Ø±Ú©Øª ÛŒØ§ Ø³Ø§Ø²Ù…Ø§Ù†

  // Ù…Ø­ØªÙˆØ§ÛŒ Ù†Ø¸Ø±
  content     String
  rating      Int      @default(5) // 1-5 Ø³ØªØ§Ø±Ù‡

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ - null = Ø¹Ù…ÙˆÙ…ÛŒ)
  category    Category? @relation("CategoryTestimonials", fields: [categoryId], references: [id], onDelete: SetNull)
  categoryId  String?   @db.ObjectId

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø¯ÙˆØ±Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
  course      Course?   @relation("CourseTestimonials", fields: [courseId], references: [id], onDelete: SetNull)
  courseId    String?   @db.ObjectId

  // ÙˆØ¶Ø¹ÛŒØª
  published   Boolean  @default(false) // Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ§ÛŒÛŒØ¯ Ø§Ø¯Ù…ÛŒÙ†
  verified    Boolean  @default(false) // ØªØ§ÛŒÛŒØ¯ Ø§Ø¹ØªØ¨Ø§Ø±
  featured    Boolean  @default(false) // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ

  // Ø¢Ù…Ø§Ø±
  likes       Int      @default(0)
  views       Int      @default(0)

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([categoryId, published])
  @@index([courseId, published])
  @@index([featured])
}
